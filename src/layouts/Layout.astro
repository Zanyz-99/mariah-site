---
import Navbar from "../components/Navbar.astro";
interface Props { title?: string; description?: string; }
const { title = "MariahIppolito.com", description = "" } = Astro.props;
---
<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <!-- Montserrat ONLY -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/icons/logo dark.png" />
    <link rel="apple-touch-icon" href="/icons/logo dark.png" />

    <slot name="head" />

    <style>
      :root{
        --bg:#ffffff; --text:#0b0b0b; --muted:#6b6b6b;
        --card:#f6f7f8; --border:#e8e8ee;
        --bar-bg: color-mix(in oklab, var(--bg) 92%, #000 8%);
        --hover: rgba(0,0,0,.06);

        --page-pad: clamp(12px, 2vw, 24px);

        /* Typography */
        --h1-size: clamp(28px, 5vw, 36px);
        --h2-size: clamp(22px, 4vw, 30px);
        --h3-size: clamp(18px, 3.5vw, 22px);
        --body-size: clamp(16px, 2.2vw, 20px);
        --line: 1.5;

        /* ðŸ”’ Montserrat everywhere */
        --font-body: 'Montserrat', system-ui, sans-serif;
        --font-title: 'Montserrat', system-ui, sans-serif;

        --footer-h: 72px;
      }

      html[data-theme="dark"]{
        --bg:#131313; --text:#e7e7e7; --muted:#b3b3b3;
        --card:#1c1c1f; --border:#2a2a2f;
        --bar-bg: color-mix(in oklab, var(--bg) 92%, #000 8%);
        --hover: rgba(255,255,255,.08);
      }

      /* âœ… Hard-set Montserrat + paragraph sizing at the root */
      html, body{
        margin:0;
        height:100%;
        background:var(--bg);
        overflow-x:hidden;

        font-family: var(--font-body);
        font-size: var(--body-size);
        line-height: var(--line);
        font-weight: 400;
        color: var(--text);

        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Everything inherits paragraph typography */
      *, *::before, *::after{
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
        color: inherit;
      }

      /* Reset form controls (accordion buttons!) */
      button, input, textarea, select{
        font: inherit;
        color: inherit;
      }

      /* Headings differ ONLY by size + weight */
      h1, h2, h3, .acc-title, .title{
        font-family: var(--font-title);
        font-weight: 700;
        color: var(--text);
      }

      h1{
        font-size: var(--h1-size);
        margin: 0 0 .25rem 0;
        line-height: calc(var(--line) - .15);
        letter-spacing: -0.01em;
      }
      h2{
        font-size: var(--h2-size);
        margin: 1.25rem 0 .5rem;
        line-height: calc(var(--line) - .1);
      }
      h3{
        font-size: var(--h3-size);
        margin: 1rem 0 .35rem;
        line-height: calc(var(--line) - .05);
      }

      /* Muted is opt-in */
      .muted, .sub{ color: var(--muted); }

      a{ color:inherit; text-decoration:none; }
      a:visited{ color:inherit; }
      a:hover{ text-decoration:underline; text-decoration-thickness:from-font; }

      main{
        margin:0;
        padding: 2rem var(--page-pad) calc(var(--footer-h) + env(safe-area-inset-bottom));
        width:100%;
        box-sizing:border-box;
      }

      .full-bleed{ width:100%; }

      .full-bleed > .inner{
        width:100%;
        padding-inline: var(--page-pad);
        box-sizing:border-box;
      }

      footer{
        position:fixed;
        left:0; right:0; bottom:0;
        border-top:1px solid var(--border);
        background:var(--bg);
        backdrop-filter:saturate(1.1) blur(4px);
      }

      .foot-wrap{
        padding:1rem var(--page-pad) calc(1rem + env(safe-area-inset-bottom));
        color: var(--muted);
      }
    </style>

    <script>
      (function(){
        const saved = localStorage.getItem('theme');
        let theme = 'light';
        if (saved === 'light' || saved === 'dark') theme = saved;
        else {
          const h = new Date().getHours();
          theme = (h >= 19 || h < 6) ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    <script>
      (function(){
        function setFooterHeight(){
          const f = document.querySelector('footer');
          if (!f) return;
          const h = Math.ceil(f.offsetHeight);
          document.documentElement.style.setProperty('--footer-h', h + 'px');
        }
        window.addEventListener('load', setFooterHeight);
        window.addEventListener('resize', setFooterHeight);
        const ro = 'ResizeObserver' in window ? new ResizeObserver(setFooterHeight) : null;
        if (ro) ro.observe(document.body);
        setTimeout(setFooterHeight, 0);
        setTimeout(setFooterHeight, 300);
      })();
    </script>
  </head>
  <body>
    <Navbar />
    <main><slot /></main>
    <footer>
      <div class="foot-wrap">
        Â© {new Date().getFullYear()} Mariah Ippolito â€¢ Hosted on Cloudflare Pages
      </div>
    </footer>
  </body>
</html>
