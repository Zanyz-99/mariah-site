---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Projects â€” Mariah Ippolito" description="Portfolio Projects">
  <section class="projects-wrap">
    <div class="projects-container">
      <!-- Duplicate last and first projects for seamless looping -->
      <img src="/projects/project-6.png" alt="Project 6" class="project" />
      <img src="/projects/project-1.png" alt="Project 1" class="project" />
      <img src="/projects/project-2.png" alt="Project 2" class="project" />
      <img src="/projects/project-3.png" alt="Project 3" class="project" />
      <img src="/projects/project-4.png" alt="Project 4" class="project" />
      <img src="/projects/project-5.png" alt="Project 5" class="project" />
      <img src="/projects/project-6.png" alt="Project 6" class="project" />
      <img src="/projects/project-1.png" alt="Project 1" class="project" />
    </div>
  </section>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: #000; /* optional background for contrast */
    }

    .projects-wrap {
      width: 100vw;
      height: 100vh;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
      display: flex;
      align-items: center;
    }

    .projects-container {
      display: flex;
      gap: 2vw;
      padding-inline: 10vw; /* Center first project */
    }

    .project {
      flex: 0 0 80vw;   /* 80% width of viewport */
      height: 80vh;     /* 80% height of viewport */
      object-fit: cover;
      scroll-snap-align: center;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      cursor: grab;
      transition: transform 0.3s;
    }

    .project:hover {
      transform: scale(1.02);
    }

    /* Thin, sleek scrollbar */
    .projects-wrap::-webkit-scrollbar {
      height: 4px;
    }
    .projects-wrap::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
    }
    .projects-wrap::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.6);
      border-radius: 2px;
    }

    .projects-wrap {
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.6) rgba(255,255,255,0.1);
    }
  </style>

  <script>
    const container = document.querySelector(".projects-wrap");
    const projects = document.querySelectorAll(".project");
    const projectCount = 6;
    const projectWidth = window.innerWidth * 0.8 + (window.innerWidth * 0.02); // 80% + gap

    // Start centered on Project 1
    container.scrollLeft = projectWidth;

    // Vertical scroll mapped to horizontal
    container.addEventListener("wheel", (evt) => {
      evt.preventDefault();
      container.scrollLeft += evt.deltaY;
    });

    // Infinite loop logic
    container.addEventListener("scroll", () => {
      const scrollPos = container.scrollLeft;

      if (scrollPos <= 0) {
        // Jump to real Project 6
        container.scrollLeft = projectWidth * projectCount;
      } else if (scrollPos >= projectWidth * (projectCount + 1)) {
        // Jump to real Project 1
        container.scrollLeft = projectWidth;
      }
    });

    // Resize handler
    window.addEventListener("resize", () => {
      const newProjectWidth = window.innerWidth * 0.8 + (window.innerWidth * 0.02);
      container.scrollLeft = newProjectWidth; // recenter
    });
  </script>
</Layout>
