---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Projects â€” Mariah Ippolito" description="Portfolio Projects">
  <section class="projects-wrap">
    <div class="projects-container">
      <!-- We'll duplicate projects at start & end for seamless looping -->
      <img src="/projects/project-6.png" alt="Project 6" class="project" />
      <img src="/projects/project-1.png" alt="Project 1" class="project" />
      <img src="/projects/project-2.png" alt="Project 2" class="project" />
      <img src="/projects/project-3.png" alt="Project 3" class="project" />
      <img src="/projects/project-4.png" alt="Project 4" class="project" />
      <img src="/projects/project-5.png" alt="Project 5" class="project" />
      <img src="/projects/project-6.png" alt="Project 6" class="project" />
      <img src="/projects/project-1.png" alt="Project 1" class="project" />
    </div>
  </section>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
    }

    .projects-wrap {
      width: 100vw;
      height: 100vh;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
    }

    .projects-container {
      display: flex;
      height: 100%;
    }

    .project {
      flex: 0 0 100vw; /* full viewport width */
      height: 100vh;    /* full viewport height */
      object-fit: cover;
      scroll-snap-align: center;
    }

    /* Custom thin scrollbar */
    .projects-wrap::-webkit-scrollbar {
      height: 4px;
    }
    .projects-wrap::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
    }
    .projects-wrap::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.6);
      border-radius: 2px;
    }
    /* Firefox */
    .projects-wrap {
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.6) rgba(255,255,255,0.1);
    }
  </style>

  <script>
    const container = document.querySelector(".projects-wrap");
    const projects = document.querySelectorAll(".project");
    const projectCount = 6;

    // Start at the "real" Project 1 (index 1 because we prepended Project 6)
    container.scrollLeft = window.innerWidth;

    // Map vertical scroll to horizontal
    container.addEventListener("wheel", (evt) => {
      evt.preventDefault();
      container.scrollLeft += evt.deltaY;
    });

    // Infinite loop logic
    container.addEventListener("scroll", () => {
      const scrollPos = container.scrollLeft;
      const width = window.innerWidth;

      if (scrollPos <= 0) {
        // Jump to the real Project 6
        container.scrollLeft = width * projectCount;
      } else if (scrollPos >= width * (projectCount + 1)) {
        // Jump to the real Project 1
        container.scrollLeft = width;
      }
    });

    // Optional: resize handler to keep scroll synced
    window.addEventListener("resize", () => {
      const scrollPos = container.scrollLeft % window.innerWidth;
      container.scrollLeft -= scrollPos;
    });
  </script>
</Layout>
