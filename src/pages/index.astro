import Container from "../components/container.astro";

const images = [
  "/projects/02 Project Two.png",
  "/projects/03 Project Three.png",
  "/projects/04 Project Four.png",
  "/projects/05 Project Five.png",
  "/projects/06 Project Six.png",
];
---

<Container width="wide" pad={false}>
  <section class="carousel">
    <div class="track">
      {images.map((src, i) => (
        <div class="slide" data-index={i}>
          <img src={src} alt={`Project ${i + 1}`} />
        </div>
      ))}
    </div>

    <div class="dots">
      {images.map((_, i) => (
        <button
          class="dot"
          data-index={i}
          aria-label={`Go to slide ${i + 1}`}
        />
      ))}
    </div>
  </section>
</Container>

<style>
.carousel {
  position: relative;
  width: 100%;
  overflow: hidden;
}

/* slide track */
.track {
  display: flex;
  transition: transform 0.5s ease;
}

/* each slide */
.slide {
  min-width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* image sizing */
.slide img {
  width: 100%;
  height: auto;
  max-height: 70vh;
  object-fit: contain;
}

/* pagination dots */
.dots {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 1rem;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #ccc;
  border: none;
  cursor: pointer;
  padding: 0;
}

.dot.active {
  background: #000;
}

/* mobile tweak */
@media (max-width: 600px) {
  .slide img {
    max-height: 50vh;
  }
}
</style>

<script>
  const track = document.querySelector(".track");
  const dots = document.querySelectorAll(".dot");

  let currentIndex = 0;

  function goToSlide(index) {
    currentIndex = index;
    track.style.transform = `translateX(-${index * 100}%)`;

    dots.forEach(dot => dot.classList.remove("active"));
    dots[index].classList.add("active");
  }

  dots.forEach(dot => {
    dot.addEventListener("click", () => {
      goToSlide(Number(dot.dataset.index));
    });
  });

  goToSlide(0);
</script>

    });
  });
</script>
