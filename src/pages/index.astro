---
import Carousel from "@/components/carousel.astro";

const projects = [
  "/projects/01 Project One.png",
  "/projects/02 Project Two.png",
  "/projects/03 Project Three.png",
  "/projects/04 Project Four.png",
  "/projects/05 Project Five.png",
  "/projects/06 Project Six.png",
];
---

<Carousel
  items={projects.length}
  itemsPerSlide={2}
  scrollSnap={true}
  className="w-full h-screen"
  wrapperClassName="h-full flex items-center gap-[2vw]"
>
  {projects.map((src) => (
    <li class="flex-shrink-0 w-[70vw] h-[70vh] rounded-lg overflow-hidden">
      <img src={src} alt={src} class="w-full h-full object-cover" />
    </li>
  ))}
</Carousel>

<style>
  /* Make mouse wheel scroll horizontally */
  [data-id="w-carousel"] {
    overflow-x: auto !important;
    overflow-y: hidden !important;
  }

  /* Thin scrollbar */
  [data-id="w-carousel"]::-webkit-scrollbar {
    height: 5px;
  }
  [data-id="w-carousel"]::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
  }
  [data-id="w-carousel"]::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.6);
    border-radius: 2px;
  }
</style>

<script type="module">
  const carousel = document.querySelector('[data-id="w-carousel"]');

  // Map vertical scroll to horizontal
  carousel.addEventListener("wheel", (e) => {
    e.preventDefault();
    carousel.scrollLeft += e.deltaY;
  });

  // Center first project on load
  const firstSlide = carousel.querySelector("li");
  if (firstSlide) {
    const slideWidth = firstSlide.offsetWidth + parseInt(getComputedStyle(firstSlide).marginRight);
    carousel.scrollLeft = slideWidth;
  }
</script>
